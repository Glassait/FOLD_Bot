on:
  push:
    branches:
      - main

name: Update workflow

jobs:
  release:
    runs-on: ubuntu-latest
    if: ${{ startsWith(github.event.head_commit.message, 'release') }}
    needs: update
    steps:
      - uses: ./workflows/update-version.yml@v1  # Replace with your workflow file path and version
        with:
          version_type: prerelease

  patch:
    runs-on: ubuntu-latest
    if: ${{ startsWith(github.event.head_commit.message, 'patch') }}
    needs: update
    steps:
      - uses: ./workflows/update-version.yml@v1  # Replace with your workflow file path and version
        with:
          version_type: prepatch

  minor:
    runs-on: ubuntu-latest
    if: ${{ startsWith(github.event.head_commit.message, 'minor') }}
    needs: update
    steps:
      - uses: ./workflows/update-version.yml@v1  # Replace with your workflow file path and version
        with:
          version_type: preminor

  major:
    runs-on: ubuntu-latest
    if: ${{ startsWith(github.event.head_commit.message, 'major') }}
    needs: update
    steps:
      - uses: ./workflows/update-version.yml@v1  # Replace with your workflow file path and version
        with:
          version_type: premajor
