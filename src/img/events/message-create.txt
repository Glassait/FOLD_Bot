title Message Create

begin User as U, Discord as D, Bot as B
U is a person

U -> ...target
...target -> B: Message send in server

if is Dev
  B --> ...rep
  ...rep --> U: Ephemeral reply
  note right of B: End execution her
end

begin AutoReply as A

B -> ...exe
...exe -> A: Auto-reply

  if message author is a bot
    A --> ...rep
    ...rep --> U: Ephemeral reply
    note right of B: End execution her
  end

  if message doesn't contain mention
    A --> ...rep
    ...rep --> U: Ephemeral reply
    note right of B: End execution her
  end

  begin Feature as F

  A -> +F: Get instance
  A <-- -F: instance

  A -> +F: Get user auto reply
  A <-- -F: All auto reply of the user

  if no auto reply
    A --> ...rep
    ...rep --> U: Ephemeral reply
    note right of B: End execution her
  end

  if Has auto reply for the mention
    A --> ...rep
    ...rep --> U: Ephemeral reply with random response
  end

terminators box
